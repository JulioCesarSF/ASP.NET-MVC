@model Leilao.MVC.Web.ViewModels.UserViewModel
@{
    ViewBag.Title = "Login";
}

@HelperLayout.Titulo("")

<div class="row">        
        @using (Html.BeginForm())
        {
            <div class="col-md-4 col-sm-4"></div>

            <div class="col-md-4 col-sm-4">
                <div class="panel panel-default">
                    <div class="panel-heading">Entrar</div>
                    <div class="panel-body">
                        <div class="form-group">
                            @Html.LabelFor(u => u.Email)
                            @Html.TextBoxFor(u => u.Email, new { @class = "form-control" })
                            @Html.ValidationMessageFor(u=>u.Email)
                        </div>
                        <div class="form-group">
                            @Html.LabelFor(u => u.Password)
                            @Html.PasswordFor(u=>u.Password, new { @class="form-control" })
                            @Html.ValidationMessageFor(u=>u.Password)
                        </div>
                    </div>

                    <div class="panel-footer">
                        <div class="form-group">
                            <input type="submit" class="btn btn-success" value="Entrar" />
                            @Html.ActionLink("Registrar", "Registrar", null, new { @class="btn btn-info pull-right" })
                        </div>
                    </div>
                </div>
            </div>
        }
</div>

@section scripts{
    <script>
        $().ready(function () {

            $("#Email").blur(function () {
                var email = $(this).val();
                if (validarInputEmail(email)) {
                    $(this).parents(".form-group").removeClass("has-error").addClass("has-success");
                    console.log("validou OK");
                } else {
                    $(this).parents(".form-group").removeClass("has-success").addClass("has-error");
                }
            });

            function validarInputEmail(emailInput) {
                if (emailInput.trim().length == 0) {
                    return false;
                }
                var pattern = new RegExp(/^([\w-\.]+@@([\w-]+\.)+[\w-]{2,4})?$/);
                return pattern.test(emailInput);
            }

        });
    </script>    

}